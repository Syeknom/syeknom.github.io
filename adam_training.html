<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Adam's Test Store">
  <title>Adam's Test Store</title>

  <script id="fsc-api" src="https://d1f8f9xcsvx3ha.cloudfront.net/sbl/0.8.0/fastspring-builder.min.js" type="text/javascript" data-storefront="aharvey.test.onfastspring.com/popup-aharvey" data-data-callback="dataCallback" data-continuous="true">
  </script>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
          fastspring.builder.recognize({
            'email': 'aharvey@fastspring.com',
            'firstName': 'Adam',
            'lastName': 'Harvey',
            'company': 'Fastspring', //optional
            'phone': '0031202251052', //optional
            'addressLine1': 'Strawinskylaan 3101', //optional
            'city': 'Amsterdam', //optional
            'region': 'Noord-Holland', //optional
            'country': 'NL', //optional
            'postalCode': '1077 ZX' //optional
          });
        });

          function dataCallback(data) {

            for (x in data) {
              document.getElementById("test").innerHTML += x;
            }

            //document.getElementById("test").innerHTML = "<pre>Test: " + JSON.stringify(data.groups[0].items[0].quantity, null, 4) + "</pre>";
          }


          function addProduct(product) {
            var sesh = {
              "update": true,
              //Define the product path(s) and the quantity to add.
              'products': [{
                'path': product,
                'quantity': 1
              }]
            }
            fastspring.builder.push(sesh);
            window.alert('Product ' + product + ' added to the cart!');
          }

          function incrementProduct(product,qty) {

            var incQty = Number(qty) + 1;
            var sesh = {
              "update": true,
              //Define the product path(s) and the quantity to add.
              'products': [{
                'path': product,
                'quantity': incQty
              }]
            }
            fastspring.builder.push(sesh);
            document.getElementById("digitalGood1Qty").innerHTML = incQty;
            window.alert('Product ' + product + ' added to the cart!');
          }
  </script>

  <style>
    span {
      font-family: helvetica;
    }

    td {
      padding: 15px;
    }

    div.hidden {
      display: none;
    }
  </style>

</head>

<body>

  <img src="https://d8y8nchqlnmka.cloudfront.net/5syTLQcMROo/hwylhkJ1RlM/small_logo.png" />
  <br />

  <table>
    <tr>
      <td rowspan="3">
        <img style="width:96px;height:auto;" data-fsc-item-path="digital-good-1" data-fsc-item-image />
      </td>
      <td>
        <span style="font-weight:bold;font-size:14px;" data-fsc-item-path="digital-good-1" data-fsc-item-display>
          <!--This value will be replaced-->
        </span>
      </td>
      <td rowspan="3">
        <img style="width:96px;height:auto;" data-fsc-item-path="digital-good-2" data-fsc-item-image />
      </td>
      <td>
        <span style="font-weight:bold;font-size:14px;" data-fsc-item-path="digital-good-2" data-fsc-item-display>
          <!--This value will be replaced-->
        </span>
      </td>
    </tr>
    <tr>
      <td>
        <span style="color:maroon;" data-fsc-item-path="digital-good-1" data-fsc-item-price>
          <!--This value will be replaced-->
        </span>
      </td>
      <td>
        <span style="color:maroon;" data-fsc-item-path="digital-good-2" data-fsc-item-price>
          <!--This value will be replaced-->
        </span>
      </td>
    </tr>
    <tr>
      <td>
        <button onclick="addProduct('digital-good-1');" data-fsc-item-path="digital-good-1" data-fsc-item-selection-smartdisplay-inverse>Add to Cart</button>
        <button onclick="incrementProduct('digital-good-1',document.getElementById('digitalGood1Qty').innerText);" data-fsc-item-path="digital-good-1" data-fsc-item-selection-smartdisplay>Add another to Cart</button>
      </td>
      <td>
        <button onclick="addProduct('digital-good-2');" data-fsc-item-path="digital-good-2" data-fsc-item-selection-smartdisplay-inverse>Add to Cart</button>
        <button onclick="incrementProduct('digital-good-2',document.getElementById('digitalGood2Qty').innerText);" data-fsc-item-path="digital-good-2" data-fsc-item-selection-smartdisplay>Add another to Cart</button>
      </td>
    </tr>
  </table>

  <br />

  <button data-fsc-action="Checkout">
    Checkout
  </button>

  <br />
  <div id="test"></div>
  <div id="digitalGood1Qty" class="hidden">1</div>
  <div id="digitalGood2Qty" class="hidden">1</div>
</body>

</html>

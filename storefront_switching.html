<html>
<header>
<script
    id="fsc-api"
    src="https://d1f8f9xcsvx3ha.cloudfront.net/sbl/0.8.3/fastspring-builder.min.js"
    type="text/javascript"
    data-storefront="aharvey.test.onfastspring.com/popup-aharvey">
</script>
</header>
<body>
<p><button onClick="switchStorefront();">Switch Storefront</button></p>

<p><button data-fsc-item-path-value='demo-product-1' data-fsc-action="Add, Checkout" >
	Checkout
 </button></p>
  
<script type="text/javascript">

function deleteStorefront() {
  // Delete the existing storefront element from the DOM and remove the FastSpring library.
	
  var fscScript = document.getElementById("fsc-api");

   if (fscScript) {
	console.log("Deleting storefront: " + fscScript.getAttribute('data-storefront'));
	   
	// Remove the DOM element
        fscScript.parentNode.removeChild(fscScript);
        fscScript = null;
	// Delete the loaded library
	delete fastspring;
        delete document.fastspring;
    }	
}
	
function switchStorefront() {

  // Here we will change from the old storefront to the new storefront
	
  // First delete the existing storefront from the DOM
  deleteStorefront();

  // Create a new <script> element containing the details of the new storefront
  const script = document.createElement('script');

  // Configure the attributes for the new Popup Storefront
  script.id = "fsc-api"; 
  script.src = "https://d1f8f9xcsvx3ha.cloudfront.net/sbl/0.8.3/fastspring-builder.min.js";
  script.setAttribute('data-storefront', "aharvey.test.onfastspring.com/popup-test");
  script.setAttribute('type', "text/javascript");

  script.onload = function () {
	// Trigger when the new script has ben loaded
  	console.log("New storefront loaded: " + script.getAttribute('data-storefront'));
  };
	
  // Append the new <script> element to the DOM
  document.head.appendChild(script); 
}

</script>
</body>
</html>

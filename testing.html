<html>
<header>
  <script
      id="fsc-api"
      src="https://d1f8f9xcsvx3ha.cloudfront.net/sbl/0.8.2/fastspring-builder.min.js"
      type="text/javascript"
      data-storefront="aharvey.test.onfastspring.com/popup-aharvey"
      data-access-key="WVD4LEQOT0UV0HKWYTDJSA">
</script>

<script type="text/javascript">
      function buy() {
        // select interval choice from drop-down menu
        var e = document.getElementById("interval");
        var intv = e.options[e.selectedIndex].value;

        var billings = document.getElementById("billings").value;
        console.log("Interval = " + intv + " / Number of Billings = " + billings);

        // build the secure payload
        fastspring.builder.secure(
        			{
        				"contact": {
        				"email":"aharvey@fastspring.com",
        				"firstName":"Adam",
        				"lastName":"Harvey"
        				},
        				"items":
        					[
        				   		{
        						    "product": "basic-subscription",
        						    "quantity": 1,
        						    "pricing": {
          								"price": {
          									"USD": 10.00
          								},
                          "interval": intv,
                          "intervalLength": 1,
                          "intervalCount": billings
          							}
        				   		}
        				 	]
        			});
        		fastspring.builder.checkout();
      }
  </script>
</header>
<body>
  <span data-fsc-item-path="basic-subscription" data-fsc-item-display></span>
  <span data-fsc-item-path="basic-subscription" data-fsc-item-price></span>

  <p><select id="interval">
    <option value="week">Weekly</option>
    <option value="month">Monthly</option>
    <option value="year">Yearly</option>
  </select></p>
  <p>Number of Billings: <input type="number" value="6" id="billings"></input></p>

  <p><button onclick="buy();" >Add to cart</button></p>
</body>
</html>
